<div class="row mt-3">
  <div class="col-md-4 col-12 profile-container ">
    <h4> {{ this.profile.name }} {{ this.profile.surname }} </h4>
    <div class="subtitle">
      <p> <strong> Username: </strong> {{ this.profile.username }} </p>
      <p> <strong> Email: </strong> {{ this.profile.email }} </p>
      <div class="row">
        <div class="col-6">
          <p> <strong> Published Auctions: </strong> {{ this.auctions.length }} </p>
        </div>
        <div class="col-6">
          <a class="text-end" [routerLink]="'/statistics'"> View statistics</a>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <p> <strong> Participated Auctions: </strong> {{ this.participatedAuctions.length }} </p>
        </div>
        <div class="col-6">
          <a class="text-end" [routerLink]="'/statistics'"> View statistics</a>
        </div>
      </div>
      <p> <strong> Account created in: </strong> {{ this.profile.createdAt.getFullYear() }} </p>
      <div class="row">
        <div class="col-6"></div>
        <div class="col-6">
          @if(!this.isClientEditing){
            <div class="d-flex align-items-center" style="color: red" (click)="openProfileEdit()">
              <mat-icon>edit</mat-icon>
              <a> Update password </a>
            </div>
          } @else {
            <div class="d-flex align-items-center" (click)="closeProfileEdit()">
              <mat-icon>close</mat-icon>
              <a> Close form </a>
            </div>
          }
        </div>
      </div>
    </div>

  </div>

  <div class="col-md-8 col-12 auction-container overflow-scroll" [style.height]="profilePageColumnHeight">
    @if(!this.isClientEditing){
    <div class="row">
      <div class="col-12">
        <h3> Your Auctions </h3>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        @for(auction of this.auctions; track auction){
          <app-auction-card
            [auctionID]="auction._id"
            [bookTitle]="auction.book.title"
            [base64Images]="auction.base64Images"
            [bookAuthor]="auction.book.author"
            [currentPrice]="auction.bids.length > 0 ? getLastBidPrice(auction.bids, auction.starting_price) : auction.starting_price"
            [bidsLength]="auction.bids.length"
            [end_date]="auction.end_date"
            [start_date]="auction.start_date"
          ></app-auction-card>
        }
      </div>
    </div>
    } @else {
      <app-update-password (closeEditEvent)="closeProfileEdit()" [isUserInProfilePage]="true"></app-update-password>
    }
  </div>


</div>
